<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Inovatie | Vista de Productos</title>
    <style>
      :root {
        --bg-1: #06233c;
        --bg-2: #0b3f63;
        --panel-soft: rgba(13, 52, 81, 0.78);
        --text: #e9f4ff;
        --muted: #b9cfdf;
        --accent: #7ac943;
        --line: rgba(167, 205, 232, 0.2);
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        font-family: 'Segoe UI', sans-serif;
        color: var(--text);
        background:
          radial-gradient(800px 400px at 12% -4%, rgba(122, 201, 67, 0.18), transparent 62%),
          radial-gradient(600px 340px at 90% 120%, rgba(104, 171, 222, 0.2), transparent 70%),
          linear-gradient(145deg, var(--bg-1), var(--bg-2));
      }

      .shell {
        width: min(1140px, 94vw);
        margin: 26px auto 40px;
      }

      .topbar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        margin-bottom: 16px;
      }

      .back {
        color: var(--text);
        text-decoration: none;
        border: 1px solid var(--line);
        background: var(--panel-soft);
        padding: 8px 12px;
        border-radius: 10px;
        font-size: 14px;
      }

      .headline {
        border: 1px solid var(--line);
        background: var(--panel-soft);
        border-radius: 16px;
        padding: 18px 20px;
      }

      .headline h1 {
        margin: 0;
        font-size: clamp(1.35rem, 3vw, 2rem);
      }

      .headline p {
        margin: 8px 0 0;
        color: var(--muted);
        font-size: 0.95rem;
      }

      .chips {
        margin-top: 14px;
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }

      .chip {
        border: 1px solid var(--line);
        border-radius: 999px;
        padding: 6px 12px;
        font-size: 12px;
        color: var(--muted);
        background: rgba(7, 31, 52, 0.58);
        text-decoration: none;
      }

      .chip.active {
        color: #082014;
        background: var(--accent);
        border-color: transparent;
        font-weight: 700;
      }

      .grid {
        margin-top: 18px;
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 14px;
      }

      .card {
        border: 1px solid var(--line);
        border-radius: 14px;
        background: linear-gradient(170deg, rgba(10, 44, 68, 0.95), rgba(8, 32, 51, 0.95));
        overflow: hidden;
        display: flex;
        flex-direction: column;
      }

      .card-top {
        padding: 14px 14px 10px;
        border-bottom: 1px solid var(--line);
      }

      .card-kicker {
        margin: 0;
        color: var(--muted);
        font-size: 11px;
        letter-spacing: 0.08em;
        text-transform: uppercase;
      }

      .card h3 {
        margin: 7px 0 0;
        font-size: 1rem;
      }

      .card-body {
        padding: 12px 14px 14px;
        display: grid;
        gap: 10px;
      }

      .card-body p {
        margin: 0;
        color: var(--muted);
        font-size: 0.9rem;
      }

      .meta {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
      }

      .tag {
        font-size: 11px;
        border-radius: 999px;
        padding: 4px 9px;
        border: 1px solid rgba(167, 205, 232, 0.24);
        color: #cae2f3;
      }

      .empty {
        margin-top: 16px;
        border: 1px dashed var(--line);
        border-radius: 12px;
        padding: 18px;
        color: var(--muted);
        background: rgba(7, 31, 52, 0.45);
      }

      @media (max-width: 980px) {
        .grid {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }
      }

      @media (max-width: 640px) {
        .shell {
          width: min(94vw, 560px);
          margin-top: 14px;
        }

        .grid {
          grid-template-columns: 1fr;
        }

        .headline {
          padding: 14px;
        }
      }
    </style>
  </head>
  <body>
    <main class="shell">
      <div class="topbar">
        <a class="back" href="menu-hexagonal3.html">Volver al menú</a>
      </div>

      <section class="headline">
        <h1 id="title">Vista de Productos</h1>
        <p id="subtitle">Consulta rápida por portafolio y categoría.</p>
        <div id="chips" class="chips"></div>
      </section>

      <section id="grid" class="grid"></section>
      <div id="empty" class="empty" hidden>No hay productos disponibles para esta selección.</div>
    </main>

    <script>
      const CATALOGO = {
        'Aditivos para Concreto': {
          'Bases Químicas': [
            { nombre: 'Superplastificante HR-500', descripcion: 'Reductor de agua de alto rango para concreto de alta fluidez.', tags: ['Líquido', 'Alto desempeño'] },
            { nombre: 'Inhibidor CI-42', descripcion: 'Mitiga corrosión en elementos expuestos a ambientes agresivos.', tags: ['Durabilidad', 'Infraestructura'] }
          ],
          Modificadores: [
            { nombre: 'Retardante RT-18', descripcion: 'Controla tiempos de fraguado en condiciones de alta temperatura.', tags: ['Obra civil', 'Bombeo'] },
            { nombre: 'Estabilizador ES-11', descripcion: 'Estabiliza mezcla en transporte prolongado sin perder desempeño.', tags: ['Logística', 'Planta'] }
          ],
          Acelerantes: [
            { nombre: 'Acelerante AT-2', descripcion: 'Incrementa resistencia temprana para optimizar ciclos de colado.', tags: ['Producción', 'Prefabricados'] }
          ]
        },
        Concreto: {
          Químicos: [
            { nombre: 'Curador CQ-10', descripcion: 'Mejora curado superficial y reduce pérdida de humedad.', tags: ['Pavimentos'] },
            { nombre: 'Sellador SC-30', descripcion: 'Protección y sellado para superficies de concreto.', tags: ['Mantenimiento'] }
          ]
        },
        Perforación: {
          'Lodos de perforación': [
            { nombre: 'Lodo LP-1', descripcion: 'Control reológico para perforación estable.', tags: ['Minería'] },
            { nombre: 'Aditivo Filtrante AF-7', descripcion: 'Reduce pérdida de fluido y mejora estabilidad del pozo.', tags: ['Pozos'] }
          ]
        },
        Terracerías: {
          'Estabilización de suelos': [
            { nombre: 'Estabilizante ES-20', descripcion: 'Incrementa capacidad portante del terreno.', tags: ['Carreteras'] }
          ]
        },
        'Refuerzo de Concreto': {
          'Fibras sintéticas': [
            { nombre: 'Fibra FS-12', descripcion: 'Control de fisuración por retracción plástica.', tags: ['Pisos industriales'] }
          ],
          'Fibras metálicas': [
            { nombre: 'Fibra FM-50', descripcion: 'Aumenta resistencia al impacto y tenacidad.', tags: ['Elementos estructurales'] }
          ]
        }
      };

      function getParams() {
        const params = new URLSearchParams(window.location.search);
        return {
          portafolio: params.get('portafolio') || Object.keys(CATALOGO)[0],
          categoria: params.get('categoria') || ''
        };
      }

      function normalizeSelection(portafolio, categoria) {
        if (!CATALOGO[portafolio]) {
          return { portafolio: Object.keys(CATALOGO)[0], categoria: '' };
        }
        if (categoria && !CATALOGO[portafolio][categoria]) {
          return { portafolio, categoria: '' };
        }
        return { portafolio, categoria };
      }

      function buildUrl(portafolio, categoria = '') {
        const params = new URLSearchParams();
        params.set('portafolio', portafolio);
        if (categoria) params.set('categoria', categoria);
        return `vista-productos.html?${params.toString()}`;
      }

      function renderChips(portafolio, categoria) {
        const chips = document.getElementById('chips');
        chips.innerHTML = '';

        Object.keys(CATALOGO).forEach((name) => {
          const a = document.createElement('a');
          a.className = `chip${name === portafolio && !categoria ? ' active' : ''}`;
          a.href = buildUrl(name);
          a.textContent = name;
          chips.appendChild(a);
        });

        if (categoria) {
          const cat = document.createElement('span');
          cat.className = 'chip active';
          cat.textContent = categoria;
          chips.appendChild(cat);
        }
      }

      function getProducts(portafolio, categoria) {
        const categorias = CATALOGO[portafolio];
        if (!categorias) return [];

        if (categoria) {
          return (categorias[categoria] || []).map((p) => ({ ...p, categoria }));
        }

        const all = [];
        Object.entries(categorias).forEach(([cat, items]) => {
          items.forEach((p) => all.push({ ...p, categoria: cat }));
        });
        return all;
      }

      function renderProducts(portafolio, categoria) {
        const title = document.getElementById('title');
        const subtitle = document.getElementById('subtitle');
        const grid = document.getElementById('grid');
        const empty = document.getElementById('empty');

        title.textContent = categoria ? `${portafolio} | ${categoria}` : `${portafolio}`;
        subtitle.textContent = categoria
          ? `Mostrando productos de la categoría ${categoria}.`
          : 'Mostrando todos los productos disponibles del portafolio seleccionado.';

        const products = getProducts(portafolio, categoria);
        grid.innerHTML = '';

        if (!products.length) {
          empty.hidden = false;
          return;
        }

        empty.hidden = true;

        products.forEach((product) => {
          const tags = (product.tags || []).map((t) => `<span class="tag">${t}</span>`).join('');
          const card = document.createElement('article');
          card.className = 'card';
          card.innerHTML = `
            <div class="card-top">
              <p class="card-kicker">${product.categoria}</p>
              <h3>${product.nombre}</h3>
            </div>
            <div class="card-body">
              <p>${product.descripcion}</p>
              <div class="meta">${tags}</div>
            </div>
          `;
          grid.appendChild(card);
        });
      }

      function init() {
        const params = getParams();
        const selection = normalizeSelection(params.portafolio, params.categoria);
        renderChips(selection.portafolio, selection.categoria);
        renderProducts(selection.portafolio, selection.categoria);
      }

      document.addEventListener('DOMContentLoaded', init);
    </script>
  </body>
</html>
